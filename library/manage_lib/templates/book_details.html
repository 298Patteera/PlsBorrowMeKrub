{% extends 'layout.html' %}
{% load static %}

{% block title %} {{ book_list.title }} {% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto mt-12 bg-white shadow-lg rounded-2xl p-8 flex flex-col md:flex-row gap-10 font-[Segoe_UI]">

  <!-- ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ -->
  <div class="flex-1 text-center">
    {% if book_list.book_img %}
      <img src="{{ book_list.book_img.url }}" alt="{{ book_list.title }}" 
          class="w-full max-w-xs mx-auto rounded-xl border border-gray-200 object-cover shadow-sm">
    {% else %}
      <img src="{% static 'no-image.png' %}" alt="no image"
          class="w-full max-w-xs mx-auto rounded-xl border border-gray-200 object-cover shadow-sm">
    {% endif %}
  </div>


  <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ -->
  <div class="flex-1">
    {% if messages %}
      <div class="max-w-2xl mx-auto mt-6 space-y-3">
        {% for message in messages %}
          <div
            class="{% if message.tags == 'error' %}bg-pink-100 text-pink-700 border-pink-300
                    {% elif message.tags == 'success' %}bg-sky-100 text-sky-700 border-sky-300
                    {% else %}bg-gray-100 text-gray-700 border-gray-300{% endif %}
                    border rounded-2xl px-5 py-3 font-medium shadow-sm">
            üå∏ {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <h2 class="text-3xl font-bold text-blue-900 mb-2">{{ book_list.title }}</h2>
    <h4 class="text-lg text-gray-700 font-medium mb-4">‡∏ú‡∏π‡πâ‡πÅ‡∏ï‡πà‡∏á : {{ book_list.authors.all|join:", " }}</h4>

    <h3 class="text-xl font-semibold text-gray-800 mb-2">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î :</h3>
    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 text-gray-700 mb-5">
      {{ book_list.details }}
    </div>

    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° -->
    <div class="grid grid-cols-3 gap-6 text-center text-gray-700 mb-10">
      <div>
        <p class="text-base text-gray-500 mb-1">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</p>
        <p class="text-lg font-semibold text-blue-600">{{ book_list.category.name }}</p>
      </div>
      <div>
        <p class="text-base text-gray-500 mb-1">‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</p>
        <p class="text-lg font-semibold text-blue-600">{{ book_list.avai_amount }}</p>
      </div>
      <div>
        <p class="text-base text-gray-500 mb-1">‡∏¢‡∏≠‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°</p>
        <p class="text-lg font-semibold text-blue-600">{{ borrow_count|default:0 }}</p>
      </div>
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏° -->
    <div class="flex justify-center gap-6">
      <form method="POST" action="{% url 'borrow-book' book_list.book_id %}">
        {% csrf_token %}
        <button type="submit" 
                class="px-8 py-3 rounded-full bg-blue-600 hover:bg-blue-800 text-white font-semibold text-lg shadow-md transition">
          ‡∏¢‡∏∑‡∏°
        </button>
      </form>

      <button type="button" 
              class="px-8 py-3 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 border border-gray-300 font-semibold text-lg shadow-md transition">
        ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠
      </button>
    </div>
  </div>

</div>
{% endblock %}
